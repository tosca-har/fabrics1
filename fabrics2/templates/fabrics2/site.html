{% extends "base.html" %} 
{% load static %}

{% block css_files %}
  <link rel="stylesheet" href="{% static "fabrics2/fabric.css" %}">
  <link rel="stylesheet" href="{% static "fabrics2/fabrics.css" %}">
  <link rel="stylesheet" href="{% static "fabrics2/abuntable.css" %}">
  <link rel="stylesheet" href="{% static "fabrics2/header.css" %}">
  <link rel="stylesheet" href="{% static "fabrics2/leaflet.css" %}">
  <script src="{% static "fabrics2/leaflet.js"%}"></script>
  <script src="{% static "fabrics2/map.js" %}"></script>
{% endblock %}

{% block page_title %} Site Details {% endblock %}
{% block content %} {% include "fabrics2/includes/header.html" %}

<h1>Site: {{ site.name }}</h1>

<h2>Island: {{ site.island }} &emsp; &emsp; &emsp; Lithology: {{ site.island_type }} ( <a href="https://geoscienceletters.springeropen.com/articles/10.1186/s40562-016-0041-8" target="_blank">Nunn et al. (2016)</a> )</h2>
<h2>Lithology and Age: {{site.macrostrat}} ( <a href="https://doi.org/10.4095/223767" target="_blank">Chorlton (2007)</a> ) &emsp; &emsp; &emsp; <a href="https://macrostrat.org/map/loc/{{site.lng}}/{{site.lat}}#z=5.0" target="_blank">Macrostrat Geological Map Link</a>  </h2>
<h2>Near/In Geonames ID: <a href="https://www.geonames.org/{{ site.geonames_id }}" target="_blank">{{ site.geonames_id }}</a>  &emsp; &emsp; &emsp; Wikidata ID: <a href="https://www.wikidata.org/wiki/{{ site.wikidata_id }}" target="_blank">{{ site.wikidata_id }}</a>  &emsp; &emsp; &emsp; Getty Thesaurus of Geographic Names ID: <a href="https://vocab.getty.edu/page/tgn/{{ site.gettyname }}" target="_blank">{{ site.gettyname }}</a></h2>
<h2>Mindat Loc ID: <a href="https://www.mindat.org/loc-{{ site.mindatname }}.html" target="_blank">{{ site.mindatname }}</a> </h2>
{% if site_wikis %}
 <br>
  <h2>In:</h2>
  {% for wikis in site_wikis %}
<p><a href="{% url "wikisite-type" wikis.slug %}">{{wikis.desc}}</a>  Wikidata ID: <a href="https://www.wikidata.org/wiki/{{ wikis.name }}" target="_blank">{{ wikis.name }}</a> </p>
  {% endfor %}
{% endif%}
 {% if has_volcanoes %}
  <br>
<h2>Volcanoes:</h2>
 {% for volc in has_volcanoes %}
  <p> <a href="https://volcano.si.edu/volcano.cfm?vn={{volc.number}}" target="_blank">{{volc.name}}</a>: {{volc.rock_type}}, {{volc.volcano_landform}} type, {{volc.type}}. </p>
 {% endfor %}
  {% endif%}
<div id="map"></div>
<p id="targetSite"></p> </div>
    <script> 
      var picon = "{% static "fabrics2/images/redPot2.png" %}";
      var bicon = "{% static "fabrics2/images/ltgreyPot.png" %}";
      var ricon = "{% static "fabrics2/images/tanPot.png" %}";
      var blackv = "{% static "fabrics2/images/black-tri.png" %}";
       var orangev = "{% static "fabrics2/images/orange-tri.png" %}";
    var purplev = "{% static "fabrics2/images/purple-tri.png" %}";
    var brownv = "{% static "fabrics2/images/brown-tri.png" %}";
    var redv = "{% static "fabrics2/images/red-tri.png" %}";
    var bluev = "{% static "fabrics2/images/blue-tri.png" %}";
    var pinkv = "{% static "fabrics2/images/pink-tri.png" %}";
    var greenv = "{% static "fabrics2/images/green-tri.png" %}";

      let mbsu = "{{mbsu}}";
      let thsu = "{{thsu}}";
  
      let siteNames = ["{{site.name}}"];
      let siteLat = [{{site.lat}}];
      let siteLng = [{{site.lng}}];
      let siteLinks = ["{% url "site-type" site.slug %}"];
      let siteFabrics = ["{{site.fabric_string}}"];
      let siteColour = [1];
      let siteview = false;
      let mapcentre =  [{{site.lat}}, {{site.lng}}];
       let volcNames = [];
    let volcLat = [];
    let volcLng= [];
    let volcType = [];
    let volcDetails= [];
    let volcLinks = [];
 {% for volc in volcanoes %}
      volcNames.push("{{volc.name}}");
      volcLat.push({{volc.lat}});
      volcLng.push({{volc.lng}});
      volcLinks.push("{{volc.number}}");
      volcDetails.push("{{volc.rock_type}} - {{volc.volcano_landform}} type - {{volc.type}}");
      volcType.push("{{volc.rock_type}}")
    {% endfor %}

      getMap(); 
    </script> 
<p>Note that to see the 'Geology' layer (layer options in top right corner) you may have to zoom out. </p>

<div class ="after-map">
  <br>
<h2>Fabrics: </h2>
{% include "fabrics2/includes/abuntable.html" %}
<br>
<table class = "fabrictable">
  <th>Name </th> <th>Cal.</th> <th>Quartz</th><th>Feldspar</th> <th>Pyroxene</th> <th>Amphibole</th> 
  <th>Opaques</th> <th>Olivine</th><th>Biotite</th> <th>Muscovite</th> <th>Epidote</th> 
  <th>Garnet/ Spinel</th><th>Ig./Met. Rocks</th> <th>Sed. Rocks</th> <th>Grog</th>  <th>Lithics/ Region</th>
  {% for fabric in site_fabrics %}
     <tr>
        <td><a href="{% url "fabric-type" fabric.slug %}">{{ fabric.slug }}</a></td>
        <td data-tag="{{fabric.calcareous_max}}"> {{fabric.calcareous_max}}</td>
        <td data-tag="{{fabric.quartz_max}}"> {{fabric.quartz_max}}</td>
        <td data-tag="{{fabric.feldspar_max}}">{{fabric.feldspar_max}}</td>
        <td data-tag="{{fabric.pyroxene_max}}">{{fabric.pyroxene_max}}</td>
        <td data-tag="{{fabric.amphibole_max}}">{{fabric.amphibole_max}}</td>
        <td data-tag="{{fabric.opaque_max}}"> {{fabric.opaque_max}}</td>
        <td data-tag="{{fabric.olivine_max}}"> {{fabric.olivine_max}}</td>
        <td data-tag="{{fabric.biotite_max}}">{{fabric.biotite_max}}</td>
        <td data-tag="{{fabric.muscovite_max}}">{{fabric.muscovite_max}}</td>
        <td data-tag="{{fabric.epidote_max}}">{{fabric.epidote_max}}</td>
        <td data-tag="{{fabric.garnet_max}}"> {{fabric.garnet_max}}</td>
        <td data-tag="{{fabric.igneous_rock_fragments_max}}">{{fabric.igneous_rock_fragments_max}}</td>
        <td data-tag="{{fabric.sedimentary_metasedimentary_max}}">{{fabric.sedimentary_metasedimentary_max}}</td>
        <td data-tag="{{fabric.grog_max}}">{{fabric.grog_max}}</td>
        <td> {{fabric.lithics}}</td>
        </tr>
        <tr>
          <td>{{ fabric.desc }}</a></td>
          <td data-tag="{{fabric.calcareous_min}}"> {{fabric.calcareous_min}}</td>
          <td data-tag="{{fabric.quartz_min}}"> {{fabric.quartz_min}}</td>
          <td data-tag="{{fabric.feldspar_min}}">{{fabric.feldspar_min}}</td>
          <td data-tag="{{fabric.pyroxene_min}}">{{fabric.pyroxene_min}}</td>
          <td data-tag="{{fabric.amphibole_min}}">{{fabric.amphibole_min}}</td>
          <td data-tag="{{fabric.opaque_min}}"> {{fabric.opaque_min}}</td>
          <td data-tag="{{fabric.olivine_min}}"> {{fabric.olivine_min}}</td>
          <td data-tag="{{fabric.biotite_min}}">{{fabric.biotite_min}}</td>
          <td data-tag="{{fabric.muscovite_min}}">{{fabric.muscovite_min}}</td>
          <td data-tag="{{fabric.epidote_min}}">{{fabric.epidote_min}}</td>
          <td data-tag="{{fabric.garnet_min}}"> {{fabric.garnet_min}}</td>
          <td data-tag="{{fabric.igneous_rock_fragments_min}}">{{fabric.igneous_rock_fragments_min}}</td>
          <td data-tag="{{fabric.sedimentary_metasedimentary_min}}">{{fabric.sedimentary_metasedimentary_min}}</td>
          <td data-tag="{{fabric.grog_min}}">{{fabric.grog_min}}</td>
          <td> {{fabric.region}}</td>
          </tr>
  {% endfor %}
</table>
</div>
<h2>Slides: </h2>
{% if site_slides %}
  <table class = "slidetable">
    <th>Slide </th> <th>Fabric</th> <th>Possible Origin</th><th>Ware</th><th>Cal.</th> <th>Quartz</th><th>Feldspar</th> <th>Pyroxene</th> <th>Amphibole</th> 
    <th>Opaques</th> <th>Olivine</th><th>Biotite</th> <th>Muscovite</th> <th>Epidote</th> 
    <th>Garnet/ Spinel</th> <th>Ig./Met. Rocks</th> <th>Sed. Rocks</th> <th>Grog</th>  <th>Lithics</th>
  {% for slide in site_slides %}
    <tr>
    <td><a href="{% url "slide-type" slide.slug %}">{{slide.name}}</a></td>
    <td>{{slide.fabric }}</td>
    <td>{{slide.sherd_origin_site}}</td>
     <td>{% if slide.ceramic_period %} <a href="{% url "period" slide.ceramic_period.slug %}">{{ slide.ceramic_period}}</a>{% endif %}</td>
    <td data-tag="{{slide.calcareous}}"> {{slide.calcareous}}</td>
    <td data-tag="{{slide.quartz}}"> {{slide.quartz}}</td>
    <td data-tag="{{slide.feldspar}}">{{slide.feldspar}}</td>
    <td data-tag="{{slide.pyroxene}}">{{slide.pyroxene}}</td>
    <td data-tag="{{slide.amphibole}}">{{slide.amphibole}}</td>
    <td data-tag="{{slide.opaque}}"> {{slide.opaque}}</td>
    <td data-tag="{{slide.olivine}}"> {{slide.olivine}}</td>
    <td data-tag="{{slide.biotite}}">{{slide.biotite}}</td>
    <td data-tag="{{slide.muscovite}}">{{slide.muscovite}}</td>
    <td data-tag="{{slide.epidote}}">{{slide.epidote}}</td>
    <td data-tag="{{slide.garnet}}"> {{slide.garnet}}</td>
    <td data-tag="{{slide.igneous_rock_fragments}}">{{slide.igneous_rock_fragments}}</td>
    <td data-tag="{{slide.sedimentary_metasedimentary}}">{{slide.sedimentary_metasedimentary}}</td>
    <td data-tag="{{slide.grog}}">{{slide.grog}}</td>
    <td> {{slide.lithics}}</td>
    </tr> 
  {% endfor %}
  </table>  
  {% for slide in site_slides %}
    <h3><a href="{% url "slide-type" slide.slug %}">{{slide.name}}</a></h3>
    {% if slide.image_name and slide.full_image_name and slide.full_image_oe_omero_id %}
    <figure><img src="{% static "fabrics2/images/slides/"|add:slide.image_name|add:"_x4_PPL.jpeg" %}" alt={{ slide.image_name }} height:"50">
      <img src="{% static "fabrics2/images/slides/"|add:slide.image_name|add:"_x4_XPL.jpeg" %}" alt= {{ slide.image_name }} height:"50">
      <figcaption> Sherd {{ slide.sherd }} from {{ slide.site }}. Slide {{slide.name }} from {{ slide.source }}. x4 Magnification PPL (left) XPL (right). Scale bar: 0.5mm. <a class="caplink" href="https://kuden.anu.edu.au/webclient/img_detail/{{slide.image_omero_id}}" target="_blank">High resolution image</a> 
       or <a class="caplink" href="https://kuden.anu.edu.au/webclient/img_detail/{{slide.full_image_omero_id}}" target="_blank">full slide in VIMIPO (user: Guest pwd: Guest)</a> with <a class="caplink" href="https://kuden.anu.edu.au/webclient/img_detail/{{slide.full_image_oe_omero_id}}" target="_blank"> higher exposure.</a> Imaged by K. Hardy and M. Leclerc, ANU.
      </figcaption>
    </figure>
    {% elif slide.image_name and slide.full_image_name %}
      <figure><img src="{% static "fabrics2/images/slides/"|add:slide.image_name|add:"_x4_PPL.jpeg" %}" alt={{ slide.image_name }} height:"50">
        <img src="{% static "fabrics2/images/slides/"|add:slide.image_name|add:"_x4_XPL.jpeg" %}" alt= {{ slide.image_name }} height:"50">
        <figcaption> Sherd {{ slide.sherd }} from {{ slide.site }}. Slide {{slide.name }} from {{ slide.source }}. x4 Magnification PPL (left) XPL (right). Scale bar: 0.5mm. <a class="caplink" href="https://kuden.anu.edu.au/webclient/img_detail/{{slide.image_omero_id}}" target="_blank">High resolution image</a> 
         or <a class="caplink" href="https://kuden.anu.edu.au/webclient/img_detail/{{slide.full_image_omero_id}}" target="_blank">full slide in VIMIPO (user: Guest pwd: Guest).</a> Imaged by K. Hardy and M. Leclerc, ANU.
        </figcaption>
      </figure>
    {% elif slide.image_name %}
      <figure><img src="{% static "fabrics2/images/slides/"|add:slide.image_name|add:"_x4_PPL.jpeg" %}" alt={{ slide.image_name }} height:"50">
        <img src="{% static "fabrics2/images/slides/"|add:slide.image_name|add:"_x4_XPL.jpeg" %}" alt= {{ slide.image_name }} height:"50">
        <figcaption> Sherd {{ slide.sherd }} from {{ slide.site }}. Slide {{slide.name }} from {{ slide.source }}. x4 Magnification PPL (left) XPL (right). Scale bar: 0.5mm. <a class="caplink" href="https://kuden.anu.edu.au/webclient/img_detail/{{slide.image_omero_id}}" target="_blank">High resolution image in VIMIPO (user: Guest pwd: Guest).</a> Imaged by K. Hardy and M. Leclerc, ANU.
        </figcaption>
      </figure>
    {% elif slide.full_image_name %}
      <p><a class="caplink" href="https://kuden.anu.edu.au/webclient/img_detail/{{slide.full_image_omero_id}}" target="_blank">{{ slide.sherd }} has a full slide scan available (user: Guest pwd: Guest).</a> Imaged by K. Hardy and M. Leclerc, ANU.</p>
    {% else %}
    <p>No images available.</p>
    {% endif%}
    <p> {{ slide.desc |capfirst}} </p>
    <br>
  {% endfor %}
  


{% else %}
  <p>No representative slide details available.</p>
{% endif%} 
<h2>References:</h2>
  {% for ref in site_references %}
    <h3> <a href="{% url "report-type" ref.slug %}">{{ ref.fullname }}</a> ({{ ref.author_list }}) </h3>
  {% endfor %}
{% include "fabrics2/includes/footer.html" %}
{% endblock %}