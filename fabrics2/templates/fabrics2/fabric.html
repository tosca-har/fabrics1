{% extends "base.html" %} 
{% load static %}

{% block css_files %}
  <link rel="stylesheet" href="{% static "fabrics2/fabric.css" %}">
  <link rel="stylesheet" href="{% static "fabrics2/abuntable.css" %}">
  <link rel="stylesheet" href="{% static "fabrics2/header.css" %}">
{% endblock %}

{% block page_title %} Fabric Details {% endblock %}
{% block content %} {% include "fabrics2/includes/header.html" %}
<h1>Fabric Code: {{ fabric.slug }}</h1>

  <h2>{{ fabric.desc |title }}</h2>
  <h2>{{ fabric.comments |capfirst }}</h2>  
  <h2>{{ fabric.region }}</h2>
  <h2>Sites: </h2>
  {% for site in fabric_sites %}
    <li><a href="{% url "site-type" site.slug %}">{{ site.slug }}</a> {{site.name}} </li>
  {% endfor %}

  <h2>Mineral and Rock Abundances </h2>
  {% include "fabrics2/includes/abuntable.html" %}
  <br>
  <table class = "slidetable">
    <th>Name </th> <th>Cal.</th> <th>Quartz</th><th>Feldspar</th> <th>Pyroxene</th> <th>Amphibole</th> 
      <th>Opaques</th> <th>Olivine</th><th>Biotite</th> <th>Muscovite</th> <th>Epidote</th> 
      <th>Garnet</th><th>Ig. Rocks</th> <th>Sed. Rocks</th> <th>Grog</th>  <th>Lithics/ Region</th>
       <tr>
          <td>Max</td>
          <td data-tag="{{fabric.calcareous_max}}"> {{fabric.calcareous_max}}</td>
          <td data-tag="{{fabric.quartz_max}}"> {{fabric.quartz_max}}</td>
          <td data-tag="{{fabric.feldspar_max}}">{{fabric.feldspar_max}}</td>
          <td data-tag="{{fabric.pyroxene_max}}">{{fabric.pyroxene_max}}</td>
          <td data-tag="{{fabric.amphibole_max}}">{{fabric.amphibole_max}}</td>
          <td data-tag="{{fabric.opaque_max}}"> {{fabric.opaque_max}}</td>
          <td data-tag="{{fabric.olivine_max}}"> {{fabric.olivine_max}}</td>
          <td data-tag="{{fabric.biotite_max}}">{{fabric.biotite_max}}</td>
          <td data-tag="{{fabric.muscovite_max}}">{{fabric.muscovite_max}}</td>
          <td data-tag="{{fabric.epidote_max}}">{{fabric.epidote_max}}</td>
          <td data-tag="{{fabric.garnet_max}}"> {{fabric.garnet_max}}</td>
          <td data-tag="{{fabric.igneous_rock_fragments_max}}">{{fabric.igneous_rock_fragments_max}}</td>
          <td data-tag="{{fabric.sedimentary_metasedimentary_max}}">{{fabric.sedimentary_metasedimentary_max}}</td>
          <td data-tag="{{fabric.grog_max}}">{{fabric.grog_max}}</td>
          <td> {{fabric.lithics}}</td>
          </tr>
          <tr>
            <td>Min</a></td>
            <td data-tag="{{fabric.calcareous_min}}"> {{fabric.calcareous_min}}</td>
            <td data-tag="{{fabric.quartz_min}}"> {{fabric.quartz_min}}</td>
            <td data-tag="{{fabric.feldspar_min}}">{{fabric.feldspar_min}}</td>
            <td data-tag="{{fabric.pyroxene_min}}">{{fabric.pyroxene_min}}</td>
            <td data-tag="{{fabric.amphibole_min}}">{{fabric.amphibole_min}}</td>
            <td data-tag="{{fabric.opaque_min}}"> {{fabric.opaque_min}}</td>
            <td data-tag="{{fabric.olivine_min}}"> {{fabric.olivine_min}}</td>
            <td data-tag="{{fabric.biotite_min}}">{{fabric.biotite_min}}</td>
            <td data-tag="{{fabric.muscovite_min}}">{{fabric.muscovite_min}}</td>
            <td data-tag="{{fabric.epidote_min}}">{{fabric.epidote_min}}</td>
            <td data-tag="{{fabric.garnet_min}}"> {{fabric.garnet_min}}</td>
            <td data-tag="{{fabric.igneous_rock_fragments_min}}">{{fabric.igneous_rock_fragments_min}}</td>
            <td data-tag="{{fabric.sedimentary_metasedimentary_min}}">{{fabric.sedimentary_metasedimentary_min}}</td>
            <td data-tag="{{fabric.grog_min}}">{{fabric.grog_min}}</td>
            <td> {{fabric.region}}</td>
            </tr>
  
  </table>

  <h2>Representative slides: </h2>
  {% if fabric_slides %}
    <table class = "slidetable">
      <th>Slide </th> <th>Site</th> <th>Origin</th><th>Cal.</th> <th>Quartz</th><th>Feldspar</th> <th>Pyroxene</th> <th>Amphibole</th> 
      <th>Opaques</th> <th>Olivine</th><th>Biotite</th> <th>Muscovite</th> <th>Epidote</th> 
      <th>Garnet</th> <th>Ig. Rocks</th> <th>Sed. Rocks</th> <th>Grog</th>  <th>Lithics</th>
    {% for slide in fabric_slides %}
      <tr>
      <td>{{slide.name}}</td>
      <td>{{slide.site|title }}</td>
      <td>{{slide.sherd_origin_site}}</td>
      <td data-tag="{{slide.calcareous}}"> {{slide.calcareous}}</td>
      <td data-tag="{{slide.quartz}}"> {{slide.quartz}}</td>
      <td data-tag="{{slide.feldspar}}">{{slide.feldspar}}</td>
      <td data-tag="{{slide.pyroxene}}">{{slide.pyroxene}}</td>
      <td data-tag="{{slide.amphibole}}">{{slide.amphibole}}</td>
      <td data-tag="{{slide.opaque}}"> {{slide.opaque}}</td>
      <td data-tag="{{slide.olivine}}"> {{slide.olivine}}</td>
      <td data-tag="{{slide.biotite}}">{{slide.biotite}}</td>
      <td data-tag="{{slide.muscovite}}">{{slide.muscovite}}</td>
      <td data-tag="{{slide.epidote}}">{{slide.epidote}}</td>
      <td data-tag="{{slide.garnet}}"> {{slide.garnet}}</td>
      <td data-tag="{{slide.igneous_rock_fragments}}">{{slide.igneous_rock_fragments}}</td>
      <td data-tag="{{slide.sedimentary_metasedimentary}}">{{slide.sedimentary_metasedimentary}}</td>
      <td data-tag="{{slide.grog}}">{{slide.grog}}</td>
      <td> {{slide.lithics}}</td>
      </tr> 
    {% endfor %}
    </table>  
    {% for slide in fabric_slides %}
      <h3>{{slide.name }}</h3>
      {% if slide.image_name and slide.full_image_name %}
        <figure><img src="{% static "fabrics2/images/slides/"|add:slide.image_name|add:"_x4_PPL.jpeg" %}" alt={{ slide.image_name }} height:"50">
          <img src="{% static "fabrics2/images/slides/"|add:slide.image_name|add:"_x4_XPL.jpeg" %}" alt= {{ slide.image_name }} height:"50">
          <figcaption> Sherd {{ slide.sherd }} from {{ slide.site|title }}. Slide {{slide.name }} from {{ slide.source }}. x4 Magnification PPL (left) XPL (right). Scale bar: 0.5mm. <a class="caplink" href="https://kuden.anu.edu.au/webclient/img_detail/{{slide.image_omero_id}}" target="_blank">High resolution image in VIMIPO.</a> 
          <a class="caplink" href="https://kuden.anu.edu.au/webclient/img_detail/{{slide.full_image_omero_id}}" target="_blank">Full slide in VIMIPO.</a>
          </figcaption>
        </figure>
      {% elif slide.image_name %}
        <figure><img src="{% static "fabrics2/images/slides/"|add:slide.image_name|add:"_x4_PPL.jpeg" %}" alt={{ slide.image_name }} height:"50">
          <img src="{% static "fabrics2/images/slides/"|add:slide.image_name|add:"_x4_XPL.jpeg" %}" alt= {{ slide.image_name }} height:"50">
          <figcaption> Sherd {{ slide.sherd }} from {{ slide.site|title }}. Slide {{slide.name }} from {{ slide.source }}. x4 Magnification PPL (left) XPL (right). Scale bar: 0.5mm. <a class="caplink" href="https://kuden.anu.edu.au/webclient/img_detail/{{slide.image_omero_id}}" target="_blank">High resolution image in VIMIPO.</a>
          </figcaption>
        </figure>
      {% elif slide.full_image_name %}
        <a class="caplink" href="https://kuden.anu.edu.au/webclient/img_detail/{{slide.full_image_omero_id}}" target="_blank">{{ slide.sherd }} has a full slide scan available.</a>
      {% else %}
      <p>No images available.</p>
      {% endif%}
      <p> {{ slide.desc |capfirst}} </p>
      <br>
    {% endfor %}
    

  
  {% else %}
    <p>No representative slide details available.</p>
  {% endif%} 
  <h2>Refs: </h2>
  {% for ref in fabric_references %}
    <h3> <a href="{% url "report-type" ref.slug %}">{{ ref.fullname }}</a>, ({{ ref.author_list }}) </h3>
  {% endfor %}



{% endblock %}
