{% extends "base.html" %}
{% load static %}

{% block css_files %}
  <link rel="stylesheet" href="{% static "fabrics2/fabrics.css" %}">
  <link rel="stylesheet" href="{% static "fabrics2/header.css" %}">
  <link rel="stylesheet" href="{% static "fabrics2/leaflet.css" %}">
  <link rel="stylesheet" href="{% static "fabrics2/map.css" %}">
  <script src="{% static "fabrics2/leaflet.js"%}"></script>
  <script src="{% static "fabrics2/map.js" %}"></script>
{% endblock %}

{% block page_title %}
  Site Index
{% endblock %}

{% block content %}
  {% include "fabrics2/includes/header.html" %}
  <h1>All Sites</h1>
  <div id="map"></div>
  <p id="targetSite"></p>
  <script> 
    var picon = "{% static "fabrics2/images/brownPot.png" %}";
    var bicon = "{% static "fabrics2/images/bluePot2.png" %}";
    var ricon = "{% static "fabrics2/images/redPot2.png" %}";
    let siteNames = [];
    let siteLat = [];
    let siteLng = [];
    let siteLinks = [];
    let siteFabrics = []; 
    {% for site in sites %}
      siteNames.push("{{site.name}}");
      siteLat.push({{site.lat}});
      siteLng.push({{site.lng}});
      siteLinks.push("{% url "site-type" site.slug %}");
      siteFabrics.push("{{site.fabric_string}}")
    {% endfor %}
      getMap(); 
    </script> 
    <ul id="maplist">
      {% for site in sites %}
         <li><a href="{% url "site-type" site.slug %}">{{ site.name }}</a></li>

      {% endfor %}
    </ul>
    
{% endblock %}
